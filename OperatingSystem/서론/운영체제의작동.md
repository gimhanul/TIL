## 1-4. Operating-System Operations

**초기 프로그램(=부트스트랩 프로그램) 실행 과정**

0. 이는 일반적으로 하드웨어 내에 펌웨어로 저장됨.
1. 부트스트랩 프로그램은 운영체제 커널을 메모리에 적재함.
2. 이때, 일부 서비스는 **시스템 데몬**이 되기 위해 커널 외부에서 제공됨.
    > 시스템 데몬: 커널이 실행되는 전체 시간 동안 실행됨.
3. 어떤 이벤트가 발생할 때까지 기다림.

<br>

### 1-4-1. 다중 프로그래밍과 다중 태스킹 Multiprogramming and MultiTasking

**다중 프로그래밍**

CPU가 항상 한 개는 실행할 수 있도록 프로그램을 구성함.
> 다중 프로그램 시스템에서 실행 중인 프로그램을 **프로세스**라고 함.

![](https://velog.velcdn.com/images%2Fwilko97%2Fpost%2F469cd7c9-9d93-4cd6-b7fc-dc05eaf3f0ef%2Fimage.png)

- 운영체제는 여러 프로세스를 동시에 메모리에 유지함.
- 프로세스 중 하나를 선택하여 실행함.
- 프로세스가 대기해야 하는 경우 다른 프로세스로 전환함.
    > 프로세스가 I/O 작업과 같은 일부 작업이 완료되기를 기다려야 할 때 등
- 그 프로세스는 대기를 마치고 CPU를 다시 돌려받음.

> 즉, 하나 이상의 프로세스를 실행해야 하는 한 CPU는 유휴 상태가 아님.

<br>

**다중 태스킹**

다중 프로그래밍의 논리적 확장.

CPU는 여러 프로세스를 전환하며 프로세스를 실행하지만, 전환이 자주 발생하여 사용자에게 빠른 **응답 시간**을 제공함.

<br>

<br>

### 1-4-2. 이중모드와 다중 모드 운영 Dual-Mode and Multimode Operation

시스템을 올바르게 실행하기 위해 운영체제 코드 실행과 사용자 정의 코드 실행을 구분함.

- 사용자 모드
- 커널 모드(수퍼바이저 모드, 시스템 모드, 특권 모드)

이는 **모드 비트 mode bit**를 통해 구분함.
![](https://velog.velcdn.com/images%2Fwilko97%2Fpost%2Fb85413dd-e699-4f2c-a099-36b345eb0649%2Fimage.png)

컴퓨터 시스템이 사용자 응용을 위해 실행될 때 시스템은 사용자 모드에 있음.

그러나 사용자 응용이 운영체제로부터 서비스를 요청하면, 사용자 모드에서 커널 모드로 전환함.

시스템은 사용자 프로그램으로 제어를 넘기기 전에 항상 사용자 모드로 전환함.

> 운영체제가 컴퓨터의 제어를 얻을 때마다 항상 커널 모드에 있음.

**특권 명령 privileged instruction**

악영향을 끼칠 수 있는 일부 명령. 특권 명령은 커널 모드에서만 수행됨. 사용자 모드에서 특권 명령을 수행하려고 시도하면, 실행하지 않고 불법적인 명령으로 간주해 운영체제로 트랩을 걺.

> 예시로는 커널 모드로 전환하는 명령어, I/O 제어, 타이머 관리 및 인터럽트 관리가 있음.

<br>

<br>

### 1-4-3. 타이머 Timer

사용자 프로그램이 무한 루프에 빠지거나 시스템 서비스 호출에 실패하여 제어가 운영체제로 복귀하지 않는 경우가 없도록 방지해야 함.

그래서 지정된 시간 후 컴퓨터를 인터럽트 하도록 설정하는 **타이머 timer**를 사용함.

- 고정 타이머: 시간이 고정되어 있음.
- 가변 타이머
  - 일반적으로 고정률의 클록 `fixed-rate clock`과 계수기로 구현함.
  - 운영체제는 계수기 값을 설정함.
  - 클록이 똑딱 `tick` 할 때마다 계수기 수가 감소함.
  - 계수기가 0이 될 때 인터럽트가 발생함.

인터럽트가 발생하면, 제어는 자동으로 운영체제에게 넘어감.

> 타이머의 값을 변경하는 명령은 특권 명령임.
